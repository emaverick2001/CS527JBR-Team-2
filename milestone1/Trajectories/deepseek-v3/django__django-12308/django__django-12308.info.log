2026-01-21 18:29:39,567 - WARNING - swea-lm-django__django-12308 - Model openrouter/deepseek/deepseek-chat does not support function calling. If your model does not support function calling, you can use `parse_function='thought_action'` instead. See https://swe-agent.com/latest/faq/ for more information.
2026-01-21 18:29:39,692 - INFO - rex-deploy-django__django-12308 - Pulling image 'docker.io/swebench/sweb.eval.x86_64.django_1776_django-12308:latest'
2026-01-21 18:29:46,222 - INFO - rex-deploy-django__django-12308 - Building image docker.io/swebench/sweb.eval.x86_64.django_1776_django-12308:latest to install a standalone python to /root. This might take a while (but you only have to do it once). To skip this step, set `python_standalone_dir` to None.
2026-01-21 18:30:53,686 - INFO - rex-deploy-django__django-12308 - Starting container docker.ioswebenchsweb.eval.x86_64.django_1776_django-12308latest-27e6e4bd-b940-4efd-b51b-c29ff979f510 with image docker.io/swebench/sweb.eval.x86_64.django_1776_django-12308:latest serving on port 50341
2026-01-21 18:30:53,686 - INFO - rex-deploy-django__django-12308 - Starting runtime at 50341
2026-01-21 18:30:55,561 - INFO - rex-deploy-django__django-12308 - Runtime started in 1.87s
2026-01-21 18:30:56,517 - INFO - swea-env-django__django-12308 - Environment Initialized
2026-01-21 18:30:57,467 - INFO - swea-agent-django__django-12308 - Setting up agent for instance django__django-12308
2026-01-21 18:30:57,468 - INFO - swea-agent-django__django-12308 - Trajectory will be saved to all_instances/django__django-12308/django__django-12308.traj
2026-01-21 18:31:02,738 - INFO - swea-tools-django__django-12308 - Resetting tools
2026-01-21 18:31:03,142 - INFO - swea-agent-django__django-12308 - SYSTEM (main)
You are a helpful assistant that can interact with a computer to solve tasks.
2026-01-21 18:31:03,326 - INFO - swea-agent-django__django-12308 - ðŸ¤– MODEL INPUT
<uploaded_files>
/testbed
</uploaded_files>
I've uploaded a python code repository in the directory /testbed. Consider the following PR description:

<pr_description>
JSONField are not properly displayed in admin when they are readonly.
Description
	
JSONField values are displayed as dict when readonly in the admin.
For example, {"foo": "bar"} would be displayed as {'foo': 'bar'}, which is not valid JSON.
I believe the fix would be to add a special case in django.contrib.admin.utils.display_for_field to call the prepare_value of the JSONField (not calling json.dumps directly to take care of the InvalidJSONInput case).

</pr_description>

Can you help me implement the necessary changes to the repository so that the requirements specified in the <pr_description> are met?
I've already taken care of all changes to any of the test files described in the <pr_description>. This means you DON'T have to modify the testing logic or any of the tests in any way!
Your task is to make the minimal changes to non-tests files in the /testbed directory to ensure the <pr_description> is satisfied.
Follow these steps to resolve the issue:
1. As a first step, it might be a good idea to find and read code relevant to the <pr_description>
2. Create a script to reproduce the error and execute it with `python <filename.py>` using the bash tool, to confirm the error
3. Edit the sourcecode of the repo to resolve the issue
4. Rerun your reproduce script and confirm that the error is fixed!
5. Think about edgecases and make sure your fix handles them as well
Your thinking should be thorough and so it's fine if it's very long.
2026-01-21 18:31:03,327 - INFO - swea-agent-django__django-12308 - ========================= STEP 1 =========================
2026-01-21 18:31:14,153 - WARNING - swea-agent-django__django-12308 - Requerying model after FunctionCallingFormatError (1th requery)
2026-01-21 18:31:14,189 - WARNING - swea-agent-django__django-12308 - Your last output did not use any tool calls!
Please make sure your output includes exactly _ONE_ function call!
You must invoke the function directly using the function call format.
You cannot invoke commands with ```, you have to use the function call format.
If you think you have already resolved the issue, please submit your changes by running the `submit` command.
If you think you cannot solve the problem, please run `exit_forfeit` (if available) or `submit`.
Else, please continue with a new tool call!
2026-01-21 18:31:17,388 - INFO - swea-agent-django__django-12308 - ðŸ’­ THOUGHT


ðŸŽ¬ ACTION
str_replace_editor view /testbed/django/contrib/admin/utils.py
2026-01-21 18:31:17,831 - INFO - swea-agent-django__django-12308 - ðŸ¤– MODEL INPUT
OBSERVATION:
<NOTE>This file is too large to display entirely. Showing abbreviated version. Please use `str_replace_editor view` with the `view_range` parameter to show selected lines next.</NOTE>
     1 import datetime
     2 import decimal
     3 from collections import defaultdict
     4 
     5 from django.core.exceptions import FieldDoesNotExist
     6 from django.db import models, router
     7 from django.db.models.constants import LOOKUP_SEP
     8 from django.db.models.deletion import Collector
     9 from django.forms.utils import pretty_name
    10 from django.urls import NoReverseMatch, reverse
    11 from django.utils import formats, timezone
    12 from django.utils.html import format_html
    13 from django.utils.regex_helper import _lazy_re_compile
    14 from django.utils.text import capfirst
    15 from django.utils.translation import ngettext, override as translation_override
    16 
    17 QUOTE_MAP = {i: '_%02X' % i for i in b'":/_#?;@&=+$,"[]<>%\n\\'}
    18 UNQUOTE_MAP = {v: chr(k) for k, v in QUOTE_MAP.items()}
    19 UNQUOTE_RE = _lazy_re_compile('_(?:%s)' % '|'.join([x[1:] for x in UNQUOTE_MAP]))
    20 
    21 
    22 class FieldIsAForeignKeyColumnName(Exception):
    23     """A field is a foreign key attname, i.e. <FK>_id."""
    24     pass
    25 
    26 
    27 def lookup_needs_distinct(opts, lookup_path):
    28 ... eliding lines 28-49 ...
    50 
    51 
    52 def prepare_lookup_value(key, value):
    53 ... eliding lines 53-62 ...
    63 
    64 
    65 def quote(s):
    66 ... eliding lines 66-72 ...
    73 
    74 
    75 def unquote(s):
    76     """Undo the effects of quote()."""
    77     return UNQUOTE_RE.sub(lambda m: UNQUOTE_MAP[m.group(0)], s)
    78 
    79 
    80 def flatten(fields):
    81 ... eliding lines 81-90 ...
    91 
    92 
    93 def flatten_fieldsets(fieldsets):
    94 ... eliding lines 94-100 ...
   101 
   102 
   103 def get_deleted_objects(objs, request, admin_site):
   104 ... eliding lines 104-156 ...
   122 ... eliding lines 122-149 ...
   157 
   158 
   159 class NestedObjects(Collector):
   160     def __init__(self, *args, **kwargs):
   161         super().__init__(*args, **kwargs)
   162         self.edges = {}  # {from_instance: [to_instances]}
   163         self.protected = set()
   164         self.model_objs = defaultdict(set)
   165 
   166     def add_edge(self, source, target):
   167         self.edges.setdefault(source, []).append(target)
   168 
   169     def collect(self, objs, source=None, source_attr=None, **kwargs):
   170 ... eliding lines 170-185 ...
   186 
   187     def related_objects(self, related_model, related_fields, objs):
   188         qs = super().related_objects(related_model, related_fields, objs)
   189         return qs.select_related(*[related_field.name for related_field in related_fields])
   190 
   191     def _nested(self, obj, seen, format_callback):
   192 ... eliding lines 192-204 ...
   205 
   206     def nested(self, format_callback=None):
   207 ... eliding lines 207-214 ...
   215 
   216     def can_fast_delete(self, *args, **kwargs):
   217         """
   218         We always want to load the objects into memory so that we can display
   219         them to the user in confirm page.
   220         """
   221         return False
   222 
   223 
   224 def model_format_dict(obj):
   225 ... eliding lines 225-240 ...
   241 
   242 
   243 def model_ngettext(obj, n=None):
   244 ... eliding lines 244-258 ...
   259 
   260 
   261 def lookup_field(name, obj, model_admin=None):
   262 ... eliding lines 262-284 ...
   285 
   286 
   287 def _get_non_gfk_field(opts, name):
   288 ... eliding lines 288-305 ...
   306 
   307 
   308 def label_for_field(name, model, model_admin=None, return_attr=False, form=None):
   309 ... eliding lines 309-365 ...
   366 
   367 
   368 def help_text_for_field(name, model):
   369 ... eliding lines 369-377 ...
   378 
   379 
   380 def display_for_field(value, field, empty_value_display):
   381 ... eliding lines 381-402 ...
   403 
   404 
   405 def display_for_value(value, empty_value_display, boolean=False):
   406 ... eliding lines 406-423 ...
   424 
   425 
   426 class NotRelationField(Exception):
   427     pass
   428 
   429 
   430 def get_model_from_relation(field):
   431     if hasattr(field, 'get_path_info'):
   432         return field.get_path_info()[-1].to_opts.model
   433     else:
   434         raise NotRelationField
   435 
   436 
   437 def reverse_field_path(model, path):
   438 ... eliding lines 438-465 ...
   466 
   467 
   468 def get_fields_from_path(model, path):
   469 ... eliding lines 469-485 ...
   486 
   487 
   488 def construct_change_message(form, formsets, add):
   489 ... eliding lines 489-534 ...
   535 
   536 
   537 def _get_changed_field_labels_from_form(form, changed_data):
   538 ... eliding lines 538-545 ...
<IMPORTANT><NOTE>The above file has been abbreviated. Please use `str_replace editor view` with `view_range` to look at relevant files in detail.</NOTE></IMPORTANT>

2026-01-21 18:31:17,840 - INFO - swea-agent-django__django-12308 - ========================= STEP 3 =========================
2026-01-21 18:31:32,923 - INFO - swea-agent-django__django-12308 - ðŸ’­ THOUGHT
To address the issue described in the PR description, we need to modify the `display_for_field` function in the `django.contrib.admin.utils` module to handle `JSONField` values properly when they are marked as readonly in the admin interface. The current implementation displays the JSON values as Python dictionaries (e.g., `{'foo': 'bar'}`), which is not valid JSON. Instead, we should use the `prepare_value` method of the `JSONField` to ensure the output is valid JSON.

### Steps to Resolve the Issue:

1. **Locate the `display_for_field` Function**:
   The `display_for_field` function is responsible for formatting field values for display in the admin interface. We need to inspect this function to understand how it currently handles `JSONField` values.

2. **Identify the `JSONField` Case**:
   We need to add a special case in `display_for_field` to check if the field is a `JSONField` and if it is readonly. If so, we should call the `prepare_value` method of the `JSONField` to format the value correctly.

3. **Modify the `display_for_field` Function**:
   We will update the function to include the special case for `JSONField`. The change should ensure that the JSON values are displayed as valid JSON strings (e.g., `{"foo": "bar"}`).

4. **Test the Changes**:
   After making the changes, we should test the functionality to ensure that the JSON values are now displayed correctly in the admin interface.

### Implementation:

Let's first locate the `display_for_field` function in the `/testbed` directory. Based on the abbreviated output, the function is defined around line 380. We will inspect the full function to make the necessary changes.

ðŸŽ¬ ACTION
str_replace_editor view /testbed/django/contrib/admin/utils.py  --view_range 380 402
2026-01-21 18:31:33,317 - INFO - swea-agent-django__django-12308 - ðŸ¤– MODEL INPUT
OBSERVATION:
Here's the result of running `cat -n` on /testbed/django/contrib/admin/utils.py:
   380	def display_for_field(value, field, empty_value_display):
   381	    from django.contrib.admin.templatetags.admin_list import _boolean_icon
   382	
   383	    if getattr(field, 'flatchoices', None):
   384	        return dict(field.flatchoices).get(value, empty_value_display)
   385	    # BooleanField needs special-case null-handling, so it comes before the
   386	    # general null test.
   387	    elif isinstance(field, models.BooleanField):
   388	        return _boolean_icon(value)
   389	    elif value is None:
   390	        return empty_value_display
   391	    elif isinstance(field, models.DateTimeField):
   392	        return formats.localize(timezone.template_localtime(value))
   393	    elif isinstance(field, (models.DateField, models.TimeField)):
   394	        return formats.localize(value)
   395	    elif isinstance(field, models.DecimalField):
   396	        return formats.number_format(value, field.decimal_places)
   397	    elif isinstance(field, (models.IntegerField, models.FloatField)):
   398	        return formats.number_format(value)
   399	    elif isinstance(field, models.FileField) and value:
   400	        return format_html('<a href="{}">{}</a>', value.url, value)
   401	    else:
   402	        return display_for_value(value, empty_value_display)


2026-01-21 18:31:33,329 - INFO - swea-agent-django__django-12308 - ========================= STEP 4 =========================
2026-01-21 18:31:42,070 - INFO - swea-agent-django__django-12308 - ðŸ’­ THOUGHT
Based on the PR description and the code we're looking at, we need to modify the `display_for_field` function to properly handle JSONField values when they're displayed as readonly in the admin interface. 

The issue is that JSONField values are being displayed as Python dict strings (e.g., `{'foo': 'bar'}`) instead of valid JSON strings (e.g., `{"foo": "bar"}`). According to the PR description, we should use the field's `prepare_value` method rather than calling `json.dumps` directly.

Here's what we need to do:
1. Identify where JSONField values are being handled (likely in the fall-through `else` case at line 402)
2. Add a special case before the final `else` to handle JSONFields
3. Use the field's `prepare_value` method to properly format the JSON

Let me first check if there's a JSONField import at the top of the file to understand how it's defined

ðŸŽ¬ ACTION
str_replace_editor view /testbed/django/contrib/admin/utils.py  --view_range 1 20
2026-01-21 18:31:42,475 - INFO - swea-agent-django__django-12308 - ðŸ¤– MODEL INPUT
OBSERVATION:
Here's the result of running `cat -n` on /testbed/django/contrib/admin/utils.py:
     1	import datetime
     2	import decimal
     3	from collections import defaultdict
     4	
     5	from django.core.exceptions import FieldDoesNotExist
     6	from django.db import models, router
     7	from django.db.models.constants import LOOKUP_SEP
     8	from django.db.models.deletion import Collector
     9	from django.forms.utils import pretty_name
    10	from django.urls import NoReverseMatch, reverse
    11	from django.utils import formats, timezone
    12	from django.utils.html import format_html
    13	from django.utils.regex_helper import _lazy_re_compile
    14	from django.utils.text import capfirst
    15	from django.utils.translation import ngettext, override as translation_override
    16	
    17	QUOTE_MAP = {i: '_%02X' % i for i in b'":/_#?;@&=+$,"[]<>%\n\\'}
    18	UNQUOTE_MAP = {v: chr(k) for k, v in QUOTE_MAP.items()}
    19	UNQUOTE_RE = _lazy_re_compile('_(?:%s)' % '|'.join([x[1:] for x in UNQUOTE_MAP]))
    20	


2026-01-21 18:31:42,490 - INFO - swea-agent-django__django-12308 - ========================= STEP 5 =========================
2026-01-21 18:32:14,872 - INFO - swea-agent-django__django-12308 - ðŸ’­ THOUGHT
The file doesn't show an import for `JSONField` in the first 20 lines. However, `JSONField` is typically part of `django.db.models`. Since the file already imports `models` from `django.db`, we can assume that `JSONField` is available as `models.JSONField`.

### Proposed Changes:
We need to modify the `display_for_field` function to add a special case for `JSONField` before the final `else` clause. Here's the updated function:

```python
def display_for_field(value, field, empty_value_display):
    from django.contrib.admin.templatetags.admin_list import _boolean_icon

    if getattr(field, 'flatchoices', None):
        return dict(field.flatchoices).get(value, empty_value_display)
    # BooleanField needs special-case null-handling, so it comes before the
    # general null test.
    elif isinstance(field, models.BooleanField):
        return _boolean_icon(value)
    elif value is None:
        return empty_value_display
    elif isinstance(field, models.DateTimeField):
        return formats.localize(timezone.template_localtime(value))
    elif isinstance(field, (models.DateField, models.TimeField)):
        return formats.localize(value)
    elif isinstance(field, models.DecimalField):
        return formats.number_format(value, field.decimal_places)
    elif isinstance(field, (models.IntegerField, models.FloatField)):
        return formats.number_format(value)
    elif isinstance(field, models.FileField) and value:
        return format_html('<a href="{}">{}</a>', value.url, value)
    elif isinstance(field, models.JSONField):
        return field.prepare_value(value)
    else:
        return display_for_value(value, empty_value_display)
```

### Key Changes:
1. Added a new condition `elif isinstance(field, models.JSONField)` to check if the field is a `JSONField`.
2. Used `field.prepare_value(value)` to ensure the JSON is properly formatted.

### Next Steps:
1. Apply this change to the file.
2. Test the changes to ensure JSON values are now displayed correctly in the admin interface.

Let me proceed with editing the file.

ðŸŽ¬ ACTION
str_replace_editor str_replace /testbed/django/contrib/admin/utils.py   --old_str 'def display_for_field(value, field, empty_value_display):
    from django.contrib.admin.templatetags.admin_list import _boolean_icon

    if getattr(field, '"'"'flatchoices'"'"', None):
        return dict(field.flatchoices).get(value, empty_value_display)
    # BooleanField needs special-case null-handling, so it comes before the
    # general null test.
    elif isinstance(field, models.BooleanField):
        return _boolean_icon(value)
    elif value is None:
        return empty_value_display
    elif isinstance(field, models.DateTimeField):
        return formats.localize(timezone.template_localtime(value))
    elif isinstance(field, (models.DateField, models.TimeField)):
        return formats.localize(value)
    elif isinstance(field, models.DecimalField):
        return formats.number_format(value, field.decimal_places)
    elif isinstance(field, (models.IntegerField, models.FloatField)):
        return formats.number_format(value)
    elif isinstance(field, models.FileField) and value:
        return format_html('"'"'<a href="{}">{}</a>'"'"', value.url, value)
    else:
        return display_for_value(value, empty_value_display)' --new_str 'def display_for_field(value, field, empty_value_display):
    from django.contrib.admin.templatetags.admin_list import _boolean_icon

    if getattr(field, '"'"'flatchoices'"'"', None):
        return dict(field.flatchoices).get(value, empty_value_display)
    # BooleanField needs special-case null-handling, so it comes before the
    # general null test.
    elif isinstance(field, models.BooleanField):
        return _boolean_icon(value)
    elif value is None:
        return empty_value_display
    elif isinstance(field, models.DateTimeField):
        return formats.localize(timezone.template_localtime(value))
    elif isinstance(field, (models.DateField, models.TimeField)):
        return formats.localize(value)
    elif isinstance(field, models.DecimalField):
        return formats.number_format(value, field.decimal_places)
    elif isinstance(field, (models.IntegerField, models.FloatField)):
        return formats.number_format(value)
    elif isinstance(field, models.FileField) and value:
        return format_html('"'"'<a href="{}">{}</a>'"'"', value.url, value)
    elif isinstance(field, models.JSONField):
        return field.prepare_value(value)
    else:
        return display_for_value(value, empty_value_display)'
2026-01-21 18:32:15,328 - INFO - swea-agent-django__django-12308 - ðŸ¤– MODEL INPUT
OBSERVATION:
The file /testbed/django/contrib/admin/utils.py has been edited. Here's the result of running `cat -n` on a snippet of /testbed/django/contrib/admin/utils.py:
   375	        if hasattr(field, 'help_text'):
   376	            help_text = field.help_text
   377	    return help_text
   378	
   379	
   380	def display_for_field(value, field, empty_value_display):
   381	    from django.contrib.admin.templatetags.admin_list import _boolean_icon
   382	
   383	    if getattr(field, 'flatchoices', None):
   384	        return dict(field.flatchoices).get(value, empty_value_display)
   385	    # BooleanField needs special-case null-handling, so it comes before the
   386	    # general null test.
   387	    elif isinstance(field, models.BooleanField):
   388	        return _boolean_icon(value)
   389	    elif value is None:
   390	        return empty_value_display
   391	    elif isinstance(field, models.DateTimeField):
   392	        return formats.localize(timezone.template_localtime(value))
   393	    elif isinstance(field, (models.DateField, models.TimeField)):
   394	        return formats.localize(value)
   395	    elif isinstance(field, models.DecimalField):
   396	        return formats.number_format(value, field.decimal_places)
   397	    elif isinstance(field, (models.IntegerField, models.FloatField)):
   398	        return formats.number_format(value)
   399	    elif isinstance(field, models.FileField) and value:
   400	        return format_html('<a href="{}">{}</a>', value.url, value)
   401	    elif isinstance(field, models.JSONField):
   402	        return field.prepare_value(value)
   403	    else:
   404	        return display_for_value(value, empty_value_display)
   405	
   406	
   407	def display_for_value(value, empty_value_display, boolean=False):
Review the changes and make sure they are as expected. Edit the file again if necessary.

2026-01-21 18:32:15,346 - INFO - swea-agent-django__django-12308 - ========================= STEP 6 =========================
2026-01-21 18:32:22,825 - WARNING - swea-agent-django__django-12308 - Requerying model after FunctionCallingFormatError (1th requery)
2026-01-21 18:32:22,874 - WARNING - swea-agent-django__django-12308 - Your last output did not use any tool calls!
Please make sure your output includes exactly _ONE_ function call!
You must invoke the function directly using the function call format.
You cannot invoke commands with ```, you have to use the function call format.
If you think you have already resolved the issue, please submit your changes by running the `submit` command.
If you think you cannot solve the problem, please run `exit_forfeit` (if available) or `submit`.
Else, please continue with a new tool call!
2026-01-21 18:32:25,637 - INFO - swea-agent-django__django-12308 - ðŸ’­ THOUGHT


ðŸŽ¬ ACTION
submit
2026-01-21 18:32:26,126 - INFO - swea-agent-django__django-12308 - ðŸ¤– MODEL INPUT
OBSERVATION:
Thank you for your work on this issue. Please carefully follow the steps below to help review your changes.

1. If you made any changes to your code after running the reproduction script, please run the reproduction script again.
  If the reproduction script is failing, please revisit your changes and make sure they are correct.
  If you have already removed your reproduction script, please ignore this step.
2. Remove your reproduction script (if you haven't done so already).
3. If you have modified any TEST files, please revert them to the state they had before you started fixing the issue.
  You can do this with `git checkout -- /path/to/test/file.py`. Use below <diff> to find the files you need to revert.
4. Run the submit command again to confirm.

Here is a list of all of your changes:

<diff>
diff --git a/django/contrib/admin/utils.py b/django/contrib/admin/utils.py
index e4ddc8f017..14d5fde7a1 100644
--- a/django/contrib/admin/utils.py
+++ b/django/contrib/admin/utils.py
@@ -398,6 +398,8 @@ def display_for_field(value, field, empty_value_display):
         return formats.number_format(value)
     elif isinstance(field, models.FileField) and value:
         return format_html('<a href="{}">{}</a>', value.url, value)
+    elif isinstance(field, models.JSONField):
+        return field.prepare_value(value)
     else:
         return display_for_value(value, empty_value_display)
 

</diff>


2026-01-21 18:32:26,149 - INFO - swea-agent-django__django-12308 - ========================= STEP 8 =========================
2026-01-21 18:32:35,653 - WARNING - swea-agent-django__django-12308 - Requerying model after FunctionCallingFormatError (1th requery)
2026-01-21 18:32:35,713 - WARNING - swea-agent-django__django-12308 - Your last output did not use any tool calls!
Please make sure your output includes exactly _ONE_ function call!
You must invoke the function directly using the function call format.
You cannot invoke commands with ```, you have to use the function call format.
If you think you have already resolved the issue, please submit your changes by running the `submit` command.
If you think you cannot solve the problem, please run `exit_forfeit` (if available) or `submit`.
Else, please continue with a new tool call!
2026-01-21 18:32:38,725 - INFO - swea-agent-django__django-12308 - ðŸ’­ THOUGHT


ðŸŽ¬ ACTION
submit
2026-01-21 18:32:39,202 - INFO - swea-agent-django__django-12308 - Found submission: diff --git a/django/contrib/admin/utils.py b/django/contrib/admin/utils.py
index e4ddc8f017..14d5fde7a1 100644
--- a/django/contrib/admin/utils.py
+++ b/django/contrib/admin/utils.py
@@ -398,6 +398,8 @@ def display_for_field(value, field, empty_value_display):
         return formats.number_format(value)
     elif isinstance(field, models.FileField) and value:
         return format_html('<a href="{}">{}</a>', value.url, value)
+    elif isinstance(field, models.JSONField):
+        return field.prepare_value(value)
     else:
         return display_for_value(value, empty_value_display)
 

2026-01-21 18:32:39,204 - INFO - swea-agent-django__django-12308 - ðŸ¤– MODEL INPUT
OBSERVATION:
diff --git a/django/contrib/admin/utils.py b/django/contrib/admin/utils.py
index e4ddc8f017..14d5fde7a1 100644
--- a/django/contrib/admin/utils.py
+++ b/django/contrib/admin/utils.py
@@ -398,6 +398,8 @@ def display_for_field(value, field, empty_value_display):
         return formats.number_format(value)
     elif isinstance(field, models.FileField) and value:
         return format_html('<a href="{}">{}</a>', value.url, value)
+    elif isinstance(field, models.JSONField):
+        return field.prepare_value(value)
     else:
         return display_for_value(value, empty_value_display)
 

2026-01-21 18:32:39,268 - INFO - swea-agent-django__django-12308 - Trajectory saved to all_instances/django__django-12308/django__django-12308.traj
2026-01-21 18:32:39,276 - INFO - swea-env-django__django-12308 - Beginning environment shutdown...
